(()=>{"use strict";const e=({formsEl:e})=>{const t=document.querySelector(e),s=document.createElement("div"),o="Ошибка";try{if(!t)throw new Error("Данная форма не существует.");t.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=t.querySelectorAll("input"),r=new FormData(t),c={};var n;s.textContent="Загрузка",t.append(s),r.forEach(((e,t)=>{c[t]=e})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")&&""!==e.value||(t=!1)})),t})(e)?(n=c,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{s.style.color="#eee",s.textContent="Данные отправлены. Наш менеджер с вами свяжится в ближайшее время.",e.forEach(((e,t)=>{t<2&&(e.value="")}))})).catch((e=>{s.textContent=o})):(s.textContent=o,s.style.color="red",console.log("Данные не валидны"))})(),setTimeout((()=>s.remove()),4e3)}))}catch(e){console.log(e.message)}};(()=>{const e=document.querySelector(".header-modal"),t=document.querySelector(".services-modal"),s=document.querySelector(".overlay"),o=document.querySelector("body"),r=e=>{e.style.display="block",s.style.display="block"};o.addEventListener("click",(s=>{s.target.closest("a.btn-block")?(s.preventDefault(),r(e)):s.target.closest(".service-button")&&r(t)})),o.addEventListener("click",(o=>{o.target.closest(".header-modal__close")||o.target.closest(".overlay")&&"block"==e.style.display?(e.style.display="none",s.style.display="none"):(o.target.closest(".services-modal__close")||o.target.closest(".overlay"))&&(t.style.display="none",s.style.display="none")}))})(),(()=>{const e=document.querySelectorAll(".benefits__item"),t=document.querySelector(".benefits-arrows"),s=document.querySelector(".benefits-inner"),o=document.querySelector(".benefits-wrap");let r,c,n=0;const l=(t=1,o=1)=>(r=s.clientWidth/t,c=o*r,e.forEach((e=>{e.style.minWidth=r})),{itemWidth:r,movePosition:c}),a=()=>{o.style.cssText+=`transform: translateX(${n}px)`},i=()=>{(n>0||n<-1080)&&(o.style.cssText="transform: translateX(0px)",n=0)};t.addEventListener("click",(e=>{e.target.closest("button.benefits__arrow--left")?(l(1,1),n+=c,a(),i()):e.target.closest("button.benefits__arrow--right")&&(l(1,1),n-=c,a(),i())})),document.documentElement.clientWidth<576&&(s.style.maxWidth="185px")})(),(()=>{const e=document.getElementById("services").querySelector(".row"),t=e.querySelectorAll(".services__item"),s=e.querySelectorAll(".services-arrows");let o=0;document.documentElement.clientWidth<576&&(t[0].classList.add("services__item--active"),t[1].classList.remove("services__item--active"));s.forEach(((e,s)=>{e.addEventListener("click",(e=>{document.documentElement.clientWidth>576?(e.target.closest(".services__arrow--right")||e.target.closest(".services__arrow--left"))&&t.forEach(((e,s)=>{t[s].classList.toggle("services__item--active")})):e.target.closest(".services__arrow--right")?(t[o].classList.remove("services__item--active"),o++,o>=t.length&&(o=0),t[o].classList.add("services__item--active")):e.target.closest(".services__arrow--left")&&0!==o&&(t[o].classList.remove("services__item--active"),o--,o<0&&(o=t.length-1),t[o].classList.add("services__item--active"))}))}))})(),(e=>{const t=document.querySelectorAll(".count-wrap"),s=()=>{let o=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60)%24,minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)}})();t.forEach(((e,t)=>{e.querySelector(".count_1>span").textContent=("0"+o.days).slice(-2),e.querySelector(".count_2>span").textContent=("0"+o.hours).slice(-2),e.querySelector(".count_3>span").textContent=("0"+o.minutes).slice(-2),e.querySelector(".count_4>span").textContent=("0"+o.seconds).slice(-2)})),o.timeRemaining>0?setTimeout(s,1e3):o.timeRemaining<=0&&t.forEach(((e,t)=>{e.querySelector(".count_1>span").textContent="00",e.querySelector(".count_2>span").textContent="00",e.querySelector(".count_3>span").textContent="00",e.querySelector(".count_4>span").textContent="00"}))};s()})("20 may 2022"),document.querySelectorAll("form").forEach((e=>{const t=e.querySelectorAll("input"),s=e=>{e.classList.remove("false"),e.classList.add("success")},o=e=>{e.classList.add("false"),e.classList.remove("success")};t.forEach((e=>{let t=e.parentNode,r=document.createElement("p");r.style.cssText="font-weight: bold; color: red; margin: 7px 0px 0px 7px;",e===e.closest('input[name="fio"]')?e.addEventListener("blur",(c=>{c.target.value=c.target.value.replace(/(?:^|\s|[-"'([{])+\S/g,(e=>e.toUpperCase())).replace(/[^а-яА-ЯёЁA-Za-z\-\s]/g,"").replace(/\s+/g," "),/[а-яА-Я]/g.test(e.value)||/[A-Za-z]/g.test(e.value)?(s(e),r&&r.remove()):(o(e),r.textContent="Неправильно заполнено Имя",t.append(r))})):e===e.closest('input[name="phone"]')?e.addEventListener("blur",(c=>{c.target.value=c.target.value.replace(/[^\d\+]+/g,"").replace(/\s+/g," "),/^[\+\d]{5,16}$/.test(e.value)?(s(e),r&&r.remove()):(o(e),r.textContent="Неправильно заполнен Телефон",t.append(r))})):e===e.closest('input[type="hidden"]')&&s(e)}))})),document.querySelector(".smooth-scroll").addEventListener("click",(e=>{scrollTo({top:0,behavior:"smooth"})})),e({formsEl:'form[name="action-form2"]'}),e({formsEl:'form[name="action-form"]'})})();