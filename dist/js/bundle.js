(()=>{"use strict";const e=({formsEl:e,calcElem:t=[]})=>{const n=document.querySelector(e),s=document.createElement("div"),o="Ошибка";try{if(!n)throw new Error("Данная форма не существует.");n.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=n.querySelectorAll("input"),r=new FormData(n),c={};var l;document.body.classList.contains("balkony")&&t.forEach((e=>{const t=document.getElementById(e.id);"number"===e.type&&null!==t.value&&0!==t.value&&""!==t.value&&(c[e.id]=t.value)})),s.textContent="Загрузка",n.append(s),r.forEach(((e,t)=>{c[t]=e})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")&&""!==e.value||(t=!1)})),t})(e)?(l=c,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{s.style.color="#eee",s.textContent="Данные отправлены. Наш менеджер с вами свяжится в ближайшее время.",e.forEach(((e,t)=>{t<2&&(e.value="")}))})).catch((e=>{s.textContent=o})):(s.textContent=o,s.style.color="red",console.log("Данные не валидны"))})(),setTimeout((()=>s.remove()),4e3)}))}catch(e){console.log(e.message)}};(()=>{const e=document.querySelector(".header-modal"),t=document.querySelector(".services-modal"),n=document.querySelector(".overlay"),s=document.querySelector("body"),o=e=>{e.style.display="block",n.style.display="block"};s.addEventListener("click",(n=>{n.target.closest("a.btn-block")?(n.preventDefault(),o(e)):n.target.closest(".service-button")&&o(t)})),s.addEventListener("click",(s=>{s.target.closest(".header-modal__close")||s.target.closest(".overlay")&&"block"==e.style.display?(e.style.display="none",n.style.display="none"):(s.target.closest(".services-modal__close")||s.target.closest(".overlay"))&&(t.style.display="none",n.style.display="none")}))})(),(()=>{const e=document.querySelectorAll(".benefits__item"),t=document.querySelector(".benefits-arrows"),n=document.querySelector(".benefits-inner"),s=document.querySelector(".benefits-wrap");let o,r,c=0;const l=(t=1,s=1)=>(o=n.clientWidth/t,r=s*o,e.forEach((e=>{e.style.minWidth=o})),{itemWidth:o,movePosition:r}),a=()=>{s.style.cssText+=`transform: translateX(${c}px)`},i=()=>{(c>0||c<-1080)&&(s.style.cssText="transform: translateX(0px)",c=0)};t.addEventListener("click",(e=>{e.target.closest("button.benefits__arrow--left")?(l(1,1),c+=r,a(),i()):e.target.closest("button.benefits__arrow--right")&&(l(1,1),c-=r,a(),i())})),document.documentElement.clientWidth<576&&(n.style.maxWidth="185px")})(),(()=>{const e=document.getElementById("services").querySelector(".row"),t=e.querySelectorAll(".services__item"),n=e.querySelectorAll(".services-arrows");let s=0;document.documentElement.clientWidth<576&&(t[0].classList.add("services__item--active"),t[1].classList.remove("services__item--active"));n.forEach(((e,n)=>{e.addEventListener("click",(e=>{document.documentElement.clientWidth>576?(e.target.closest(".services__arrow--right")||e.target.closest(".services__arrow--left"))&&t.forEach(((e,n)=>{t[n].classList.toggle("services__item--active")})):e.target.closest(".services__arrow--right")?(t[s].classList.remove("services__item--active"),s++,s>=t.length&&(s=0),t[s].classList.add("services__item--active")):e.target.closest(".services__arrow--left")&&0!==s&&(t[s].classList.remove("services__item--active"),s--,s<0&&(s=t.length-1),t[s].classList.add("services__item--active"))}))}))})(),(()=>{const e=document.querySelector(".smooth-scroll"),t=()=>{window.pageYOffset>0&&(window.scrollBy(0,-70),setTimeout(t,0))};window.addEventListener("scroll",(()=>{let t=window.pageYOffset,n=document.documentElement.clientHeight;e.style.opacity=t>n?1:0})),e.addEventListener("click",t)})(),(e=>{document.querySelector(".okna");const t=document.getElementById("calc"),n=document.getElementById("calc-type"),s=document.getElementById("calc-type-material"),o=document.getElementById("calc-input");let r=document.getElementById("calc-total");document.body.closest(".balkony")&&t.addEventListener("change",(t=>{(()=>{const t=+n.options[n.selectedIndex].value,c=o.value;let l=+s.options[s.selectedIndex].value,a=0,i=1;o.value>99&&(i=1.7),s.value>0||(l=1),a=n.value>0&&o.value&&/\d+/g.test(o.value)?e*t*l*c*i:0,r.value=Math.round(a),(({timing:e,draw:t,duration:n})=>{let s=performance.now();requestAnimationFrame((function o(r){let c=(r-s)/n;c>1&&(c=1);let l=e(c);t(l),c<1&&requestAnimationFrame(o)}))})({duration:333,timing:e=>e,draw(e){r=document.getElementById("calc-total"),r.value=Math.round(a/(1/e))}})})()}))})(300),(()=>{const e=document.querySelectorAll(".sertificate-document"),t=document.querySelectorAll(".document-overlay"),n=document.querySelector(".overlay");let s=0;e.forEach(((o,r)=>{o.classList.add("document-inner"),o.addEventListener("click",(c=>{c.preventDefault();const l=c.target.closest(".sertificate-document"),a=`<div class="modal-img__inner"><span class="sertificate-btn sertificate-btn--left"></span>\n      <img class="modal-img" style="border-radius:20px;" src="${l}">\n      <span class="sertificate-btn sertificate-btn--right"></span></div>`;c.target.closest(".modal-img")||c.target.matches("span.sertificate-btn--left")?document.querySelectorAll(".modal-img__inner").forEach((t=>{t.remove(),s++,s>=e.length&&(s=0),e[s].innerHTML+=a})):c.target.matches("span.sertificate-btn--right")?document.querySelectorAll(".modal-img__inner").forEach((t=>{t.remove(),s--,s<0&&(s=e.length-1),e[s].innerHTML+=a})):c.target.closest(".modal-img__inner")?document.querySelectorAll(".modal-img__inner").forEach((e=>{e.remove(),n.style.display="none"})):o===l&&t.forEach(((e,t)=>{t===r&&(o.innerHTML+=a,n.style.display="block")}))}))}))})(),(()=>{const e=document.querySelector("#reviews"),t=(document.querySelector(".comments-container"),document.querySelectorAll(".comment-item"),e.querySelector(".comments-container"));let n,s,o=0;document.addEventListener("DOMContentLoaded",(()=>{let e=document.createElement("div");e.style.width="100%",e.innerHTML='<img src="./images/Spin-0.8s-200px.gif" style="display: block; width: 25%; text-align: center; margin: 0 auto;" alt="" />',t.append(e),r(),e.remove()}),!1);const r=()=>{const e=()=>fetch("./comments.json").then((e=>e.json()));e().then((e=>{(e=>{e.comments.forEach((e=>{switch(""===e.image&&(e.image="unnamed.png"),e.id){case 0:n=`<div class="review-margin-bottom row comment-item">\n          <div class="col-xs-3 col-sm-2">\n            <div class="review-user">\n              <img src="images/users/${e.image}" alt="" class="img-responsive avatar">\n            </div>\n          </div>\n          <div class="col-xs-9 col-sm-9">\n            <div class="review-inner review-green review-arrow review-arrow-left">\n              <p class="text-normal">${e.author}</p>\n              <p>${e.comment}</p>\n            </div>\n          </div>\n          </div>`;break;case 1:n+=`<div class="review-margin-bottom row comment-item">\n          <div class="col-xs-9 col-sm-9">\n            <div class="review-inner review-gray review-arrow review-arrow-right">\n              <p class="text-normal">${e.author}</p>\n              <p>${e.comment}</p>\n            </div>\n          </div>\n          <div class="col-xs-3 col-sm-2">\n            <div class="review-user">\n              <img src="images/users/${e.image}" alt="" class="img-responsive avatar">\n            </div>\n          </div>\n          </div>`;break;case 2:n+=`<div class="row comment-item">\n          <div class="col-xs-3 col-sm-2">\n            <div class="review-user">\n              <img src="images/users/${e.image}" alt="" class="img-responsive avatar">\n            </div>\n          </div>\n          <div class="col-xs-9 col-sm-9">\n            <div class="review-inner review-orange review-arrow review-arrow-left">\n              <p class="text-normal">${e.author}</p>\n              <p>${e.comment}</p>\n            </div>\n          </div>\n          </div>`}t.innerHTML=n}))})(e)})),e().then((e=>{s=setInterval((()=>{(e=>{let r=e.comments;""===r[o].image&&(r[o].image="unnamed.png"),1!==o&&2!==o||(r[o].comment="Отлично всё сделано, побольше бы таких профессионалов на рынке!\n      Установили окна быстро и аккуратно. Приятно было пообщаться и узнать новые рекомендации о правильной эксплуатации ",r[o].author="Венчурные капиталисты",r[o].image="unnamed.png"),r.length>2?(n=`\n      <div class="col-xs-3 col-sm-2">\n        <div class="review-user">\n        \n          <img src="images/users/${r[o].image}" alt="" class="img-responsive avatar">\n        </div>\n      </div>\n      <div class="col-xs-9 col-sm-9">\n        <div class="review-inner review-green review-arrow review-arrow-left">\n          <p class="text-normal">${r[o].author}</p>\n          <p>${r[o].comment}</p>\n        </div>\n      </div>\n      `,t.childNodes[0].innerHTML=n,o++,o>=r.length&&(o=0)):clearInterval(s)})(e)}),2e4)}))}})(),(e=>{const t=document.querySelectorAll(".count-wrap"),n=()=>{let s=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60)%24,minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)}})();t.forEach(((e,t)=>{e.querySelector(".count_1>span").textContent=("0"+s.days).slice(-2),e.querySelector(".count_2>span").textContent=("0"+s.hours).slice(-2),e.querySelector(".count_3>span").textContent=("0"+s.minutes).slice(-2),e.querySelector(".count_4>span").textContent=("0"+s.seconds).slice(-2)})),s.timeRemaining>0?setTimeout(n,1e3):s.timeRemaining<=0&&t.forEach(((e,t)=>{e.querySelector(".count_1>span").textContent="00",e.querySelector(".count_2>span").textContent="00",e.querySelector(".count_3>span").textContent="00",e.querySelector(".count_4>span").textContent="00"}))};n()})("10 june 2022"),document.querySelectorAll("form").forEach((e=>{const t=e.querySelectorAll("input"),n=e=>{e.classList.remove("false"),e.classList.add("success")},s=e=>{e.classList.add("false"),e.classList.remove("success")};t.forEach((e=>{let t=e.parentNode,o=document.createElement("p");o.style.cssText="font-weight: bold; color: red; margin: 7px 0px 0px 7px;",e===e.closest('input[name="fio"]')?e.addEventListener("blur",(r=>{r.target.value=r.target.value.replace(/(?:^|\s|[-"'([{])+\S/g,(e=>e.toUpperCase())).replace(/[^а-яА-ЯёЁ\-\s]/g,"").replace(/\s+/g," "),/[а-яА-Я]/g.test(e.value)?(n(e),o&&o.remove()):(s(e),o.textContent="Неправильно заполнено Имя",t.append(o))})):e===e.closest('input[name="phone"]')?e.addEventListener("blur",(r=>{r.target.value=r.target.value.replace(/[^\d\+]+/g,"").replace(/\s+/g," "),/^[\+\d]{5,16}$/.test(e.value)?(n(e),o&&o.remove()):(s(e),o.textContent="Неправильно заполнен Телефон",t.append(o))})):e===e.closest('input[type="hidden"]')&&n(e)}))})),e({formsEl:'form[name="callback-form"]',calcElem:[{type:"number",id:"calc-total"}]}),e({formsEl:'form[name="application-form"]',calcElem:[{type:"number",id:"calc-total"}]}),e({formsEl:'form[name="action-form2"]',calcElem:[{type:"number",id:"calc-total"}]}),e({formsEl:'form[name="action-form"]',calcElem:[{type:"number",id:"calc-total"}]})})();