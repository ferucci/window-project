(()=>{"use strict";const e=({formsEl:e,calcElem:t=[]})=>{const o=document.querySelector(e),n=document.createElement("div"),c="Ошибка";try{if(!o)throw new Error("Данная форма не существует.");o.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=o.querySelectorAll("input"),l=new FormData(o),s={};var r;document.body.classList.contains("balkony")&&t.forEach((e=>{const t=document.getElementById(e.id);"number"===e.type&&null!==t.value&&0!==t.value&&""!==t.value&&(s[e.id]=t.value)})),n.textContent="Загрузка",o.append(n),l.forEach(((e,t)=>{s[t]=e})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")&&""!==e.value||(t=!1)})),t})(e)?(r=s,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{n.style.color="#eee",n.textContent="Данные отправлены. Наш менеджер с вами свяжится в ближайшее время.",e.forEach(((e,t)=>{t<2&&(e.value="")}))})).catch((e=>{n.textContent=c})):(n.textContent=c,n.style.color="red",console.log("Данные не валидны"))})(),setTimeout((()=>n.remove()),4e3)}))}catch(e){console.log(e.message)}};(()=>{const e=document.querySelector(".header-modal"),t=document.querySelector(".services-modal"),o=document.querySelector(".overlay"),n=document.querySelector("body"),c=e=>{e.style.display="block",o.style.display="block"};n.addEventListener("click",(o=>{o.target.closest("a.btn-block")?(o.preventDefault(),c(e)):o.target.closest(".service-button")&&c(t)})),n.addEventListener("click",(n=>{n.target.closest(".header-modal__close")||n.target.closest(".overlay")&&"block"==e.style.display?(e.style.display="none",o.style.display="none"):(n.target.closest(".services-modal__close")||n.target.closest(".overlay"))&&(t.style.display="none",o.style.display="none")}))})(),(()=>{const e=document.querySelectorAll(".benefits__item"),t=document.querySelector(".benefits-arrows"),o=document.querySelector(".benefits-inner"),n=document.querySelector(".benefits-wrap");let c,l,s=0;const r=(t=1,n=1)=>(c=o.clientWidth/t,l=n*c,e.forEach((e=>{e.style.minWidth=c})),{itemWidth:c,movePosition:l}),a=()=>{n.style.cssText+=`transform: translateX(${s}px)`},i=()=>{(s>0||s<-1080)&&(n.style.cssText="transform: translateX(0px)",s=0)};t.addEventListener("click",(e=>{e.target.closest("button.benefits__arrow--left")?(r(1,1),s+=l,a(),i()):e.target.closest("button.benefits__arrow--right")&&(r(1,1),s-=l,a(),i())})),document.documentElement.clientWidth<576&&(o.style.maxWidth="185px")})(),(()=>{const e=document.getElementById("services").querySelector(".row"),t=e.querySelectorAll(".services__item"),o=e.querySelectorAll(".services-arrows");let n=0;document.documentElement.clientWidth<576&&(t[0].classList.add("services__item--active"),t[1].classList.remove("services__item--active"));o.forEach(((e,o)=>{e.addEventListener("click",(e=>{document.documentElement.clientWidth>576?(e.target.closest(".services__arrow--right")||e.target.closest(".services__arrow--left"))&&t.forEach(((e,o)=>{t[o].classList.toggle("services__item--active")})):e.target.closest(".services__arrow--right")?(t[n].classList.remove("services__item--active"),n++,n>=t.length&&(n=0),t[n].classList.add("services__item--active")):e.target.closest(".services__arrow--left")&&0!==n&&(t[n].classList.remove("services__item--active"),n--,n<0&&(n=t.length-1),t[n].classList.add("services__item--active"))}))}))})(),(()=>{const e=document.querySelector(".smooth-scroll"),t=()=>{window.pageYOffset>0&&(window.scrollBy(0,-70),setTimeout(t,0))};window.addEventListener("scroll",(()=>{let t=window.pageYOffset,o=document.documentElement.clientHeight;e.style.opacity=t>o?1:0})),e.addEventListener("click",t)})(),(e=>{document.querySelector(".okna");const t=document.getElementById("calc"),o=document.getElementById("calc-type"),n=document.getElementById("calc-type-material"),c=document.getElementById("calc-input");let l=document.getElementById("calc-total");document.body.closest(".balkony")&&t.addEventListener("change",(t=>{(()=>{const t=+o.options[o.selectedIndex].value,s=c.value;let r=+n.options[n.selectedIndex].value,a=0,i=1;c.value>99&&(i=1.7),n.value>0||(r=1),a=o.value>0&&c.value&&/\d+/g.test(c.value)?e*t*r*s*i:0,l.value=Math.round(a),(({timing:e,draw:t,duration:o})=>{let n=performance.now();requestAnimationFrame((function c(l){let s=(l-n)/o;s>1&&(s=1);let r=e(s);t(r),s<1&&requestAnimationFrame(c)}))})({duration:333,timing:e=>e,draw(e){l=document.getElementById("calc-total"),l.value=Math.round(a/(1/e))}})})()}))})(300),(()=>{const e=document.querySelectorAll(".sertificate-document"),t=document.querySelectorAll(".document-overlay"),o=document.querySelector(".overlay");let n=0;e.forEach(((c,l)=>{c.classList.add("document-inner"),c.addEventListener("click",(s=>{s.preventDefault();const r=s.target.closest(".sertificate-document"),a=`<div class="modal-img__inner"><span class="sertificate-btn sertificate-btn--left"></span>\n      <img class="modal-img" style="border-radius:20px;" src="${r}">\n      <span class="sertificate-btn sertificate-btn--right"></span></div>`;s.target.closest(".modal-img")||s.target.matches("span.sertificate-btn--left")?document.querySelectorAll(".modal-img__inner").forEach((t=>{t.remove(),n++,n>=e.length&&(n=0),e[n].innerHTML+=a})):s.target.matches("span.sertificate-btn--right")?document.querySelectorAll(".modal-img__inner").forEach((t=>{t.remove(),n--,n<0&&(n=e.length-1),e[n].innerHTML+=a})):s.target.closest(".modal-img__inner")?document.querySelectorAll(".modal-img__inner").forEach((e=>{e.remove(),o.style.display="none"})):c===r&&t.forEach(((e,t)=>{t===l&&(c.innerHTML+=a,o.style.display="block")}))}))}))})(),(e=>{const t=document.querySelectorAll(".count-wrap"),o=()=>{let n=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{timeRemaining:t,days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60)%24,minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)}})();t.forEach(((e,t)=>{e.querySelector(".count_1>span").textContent=("0"+n.days).slice(-2),e.querySelector(".count_2>span").textContent=("0"+n.hours).slice(-2),e.querySelector(".count_3>span").textContent=("0"+n.minutes).slice(-2),e.querySelector(".count_4>span").textContent=("0"+n.seconds).slice(-2)})),n.timeRemaining>0?setTimeout(o,1e3):n.timeRemaining<=0&&t.forEach(((e,t)=>{e.querySelector(".count_1>span").textContent="00",e.querySelector(".count_2>span").textContent="00",e.querySelector(".count_3>span").textContent="00",e.querySelector(".count_4>span").textContent="00"}))};o()})("1 june 2022"),document.querySelectorAll("form").forEach((e=>{const t=e.querySelectorAll("input"),o=e=>{e.classList.remove("false"),e.classList.add("success")},n=e=>{e.classList.add("false"),e.classList.remove("success")};t.forEach((e=>{let t=e.parentNode,c=document.createElement("p");c.style.cssText="font-weight: bold; color: red; margin: 7px 0px 0px 7px;",e===e.closest('input[name="fio"]')?e.addEventListener("blur",(l=>{l.target.value=l.target.value.replace(/(?:^|\s|[-"'([{])+\S/g,(e=>e.toUpperCase())).replace(/[^а-яА-ЯёЁ\-\s]/g,"").replace(/\s+/g," "),/[а-яА-Я]/g.test(e.value)?(o(e),c&&c.remove()):(n(e),c.textContent="Неправильно заполнено Имя",t.append(c))})):e===e.closest('input[name="phone"]')?e.addEventListener("blur",(l=>{l.target.value=l.target.value.replace(/[^\d\+]+/g,"").replace(/\s+/g," "),/^[\+\d]{5,16}$/.test(e.value)?(o(e),c&&c.remove()):(n(e),c.textContent="Неправильно заполнен Телефон",t.append(c))})):e===e.closest('input[type="hidden"]')&&o(e)}))})),e({formsEl:'form[name="callback-form"]',calcElem:[{type:"number",id:"calc-total"}]}),e({formsEl:'form[name="application-form"]',calcElem:[{type:"number",id:"calc-total"}]}),e({formsEl:'form[name="action-form2"]',calcElem:[{type:"number",id:"calc-total"}]}),e({formsEl:'form[name="action-form"]',calcElem:[{type:"number",id:"calc-total"}]})})();